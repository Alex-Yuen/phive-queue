language: php

php:
    - 5.3
    - 5.4
    - 5.5
    - hhvm
    
matrix:
    allow_failures:
        - php: hhvm

services:
    - mongodb
    - redis-server

before_script:
    - sh -c 'php_version=$(phpenv version-name); if [ "hhvm" != "$php_version" ]; then printf "extension = mongo.so\nextension = redis.so" >> ~/.phpenv/versions/$php_version/etc/php.ini; fi;'
    - mysql -e 'create database phive_tests;'
    - psql -c 'create database phive_tests;' -U postgres

script: phpunit -v
